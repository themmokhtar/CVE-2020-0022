#pragma once

#include "errors.h"

#include <stddef.h>
#include <stdbool.h>

err_t bluetooth_hci_create(int *hci_sock_fd);
err_t bluetooth_hci_spoof_acl(const int hci_sock_fd, const uint16_t hci_handle, const uint8_t packet_id, const uint16_t continuation_size, const bool is_continuation, uint8_t *data, const uint16_t data_size);

err_t bluetooth_l2cap_create(int *l2cap_sock_fd);
err_t bluetooth_l2cap_connect(const int l2cap_sock_fd, const char *bdaddr_str, uint16_t *hci_handle);
err_t bluetooth_l2cap_recv(const int l2cap_sock_fd, uint8_t *buffer, size_t buffer_max_size, size_t *read_amount);